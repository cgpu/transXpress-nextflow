////
//// nextflow parameters ////
////

params.scratch_dir = "/lab/weng_scratch/tmp/" //Just for testing, not for general release
env.PATH = "/lab/solexa_weng/testtube/SPAdes-3.13.0-Linux/bin/:/lab/solexa_weng/testtube/deeploc-1.0/bin:/lab/solexa_weng/testtube/infernal-1.1.2-linux-intel-gcc/binaries:/lab/solexa_weng/testtube/trinityrnaseq-Trinity-v2.8.4:/lab/solexa_weng/testtube/TransDecoder-TransDecoder-v5.5.0:/lab/solexa_weng/testtube/transrate-1.0.3-linux-x86_64:/lab/solexa_weng/testtube/signalp-4.1:/lab/solexa_weng/testtube/tmhmm-2.0c/bin:/lab/solexa_weng/testtube/ncbi-blast-2.7.1+/bin:/lab/solexa_weng/testtube/bowtie2-2.3.4.3-linux-x86_64:/lab/solexa_weng/testtube/hmmer-3.2.1/src:$PATH"
process.executor = "local" //Just for testing, not for general release
executor.queueSize = 2000
executor.exitReadTimeout = "120 sec"
report.enabled = true
trace.enabled = true
dag.enabled = true
dag.file = "dag.html"

process.errorStrategy = "retry"
process.maxRetries = 1

////
//// transXpress parameters ////
////

params.storeDB = "/lab/solexa_weng/tmp/transXpress_db/" //All the used bioinformatic databases (e.g. pfam, swissprot) will be downloaded to this location
//Needs ~10 GB of space, and should be on a shared filesystem to enable all forked transXpress processes to access the files.

//By default, transXpress will add a prefix to your transcriptome assembly in the form <date>_<metadata>_<assembler>
//You may disable all these additions if you do not like them.
//For the <metadata> parameter, we suggest you put the "Genus species" of the main species your dataset describes
//but, you are free to disable the metadata parameter or use it to record non-genus-species metadata e.g. sample identifier
params.prefix_add_date = true //Set to false to disable
params.prefix_add_date_formatting = "yyMMdd" //See https://docs.oracle.com/javase/8/docs/api/java/text/SimpleDateFormat.html to change this formatting 
params.prefix_add_metadata_file = "./species.txt" //Expects to find a text file with the content within separated by spaces. Set to "" to disable
params.prefix_add_assembler = true //Will add Trinity or rnaSPAdes to the prefix, depending on which assembler is used

//Paths to the Raw fastq reads used transXpress are specified in this file.  See the documentation for instructions on creating this file
params.samples = "samples.txt"

params.trimmomatic_adapter_file = "./adapters.fasta" //This file contains many types of sequencing adapters for automated removal with trimmomatic
params.TRIMMOMATIC_PARAMS = "ILLUMINACLIP:adapters.fasta:2:30:10 SLIDINGWINDOW:4:5 LEADING:5 TRAILING:5 MINLEN:25" //transXpress will automatically rename the params.trimmomatic_adapters file to ./adapters.fasta

params.TRINITY_PARAMS = " --seqType fq"
params.RNASPADES_PARAMS = ""

params.SIGNALP_ORGANISMS = "euk"


//// See below for the profiles that choose which HPC system, and whether or you want to do a stranded or unstranded assembly

profiles {
  notStrandSpecific_local {
    process.executor = "local"
    
// Used for both trinity and kallisto jobs!
    params.STRAND_SPECIFIC = "" // --SS_lib_type=RF
    params.TRINITY_PARAMS += " --min_glue 2"
    params.TRINITY_PARAMS += " --min_kmer_cov 2"
    params.TRINITY_PARAMS += " --no_normalize_reads"

  }

  strandSpecific_local {
    process.executor = "local"
    
// Used for both trinity and kallisto jobs!
    params.STRAND_SPECIFIC = "--SS_lib_type=RF"
    params.TRINITY_PARAMS += " --min_glue 2"
    params.TRINITY_PARAMS += " --min_kmer_cov 2"
    params.TRINITY_PARAMS += " --no_normalize_reads"

  }

  notStrandSpecific_LSF {
    
// Used for both trinity and kallisto jobs!
    params.STRAND_SPECIFIC = "--SS_lib_type=RF"
    params.TRINITY_PARAMS += " --min_glue 2"
    params.TRINITY_PARAMS += " --min_kmer_cov 2"
    params.TRINITY_PARAMS += " --no_normalize_reads"

  }

  strandSpecific_LSF {
    process.executor = "lsf"
    process.queue = "18" //Just for testing, not for general release
    // Used for both trinity and kallisto jobs!
    params.STRAND_SPECIFIC = "--SS_lib_type=RF"
    params.TRINITY_PARAMS += " --min_glue 2"
    params.TRINITY_PARAMS += " --min_kmer_cov 2"
    params.TRINITY_PARAMS += " --no_normalize_reads"

  }

  test_notStrandSpecific_local {
    process.executor = "local"
    process.maxForks = 2 //if running locally, otherwise no limit
    report.enabled = true
    trace.enabled = true
    dag.enabled = true
    dag.file = "test_nonSS_dag.svg"
    report.file = "test_nonSS_report.html"

    params.TRINITY_PARAMS = " --seqType fq"
    // Used for both trinity and kallisto jobs!
    params.STRAND_SPECIFIC = "" // --SS_lib_type=RF
    params.TRINITY_PARAMS += " --min_glue 2"
    params.TRINITY_PARAMS += " --min_kmer_cov 10"
    params.TRINITY_PARAMS += " --no_normalize_reads"

  }
} 
